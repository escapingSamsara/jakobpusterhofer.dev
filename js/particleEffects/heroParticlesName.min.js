window.addEventListener("load",function(){function t(){e.clearRect(0,0,i.width,i.height),a.render(),requestAnimationFrame(t)}const i=document.getElementById("canvasNameHeader"),e=i.getContext("2d",{}),s=document.getElementById("canvasNameHeader");i.width=s.clientWidth,i.height=s.clientHeight;class h{constructor(t,i,e,s){this.effect=t,this.x=Math.random()*this.effect.canvasWidth,this.y=Math.random()*this.effect.canvasHeight,this.color=s,this.originX=Math.floor(i),this.originY=Math.floor(e),this.size=(1*Math.random()+1)*this.effect.gap/2+.5,this.dx=0,this.dy=0,this.vx=0,this.vy=0,this.force=0,this.angle=0,this.distance=0,this.friction=.2*Math.random()+.15,this.ease=.1*Math.random()+.02}draw(){this.effect.context.fillStyle=this.color,this.effect.context.fillRect(this.x,this.y,this.size,this.size)}update(){this.dx=this.effect.mouse.x-this.x,this.dy=this.effect.mouse.y-this.y,this.distance=this.dx*this.dx+this.dy*this.dy,this.force=-this.effect.mouse.radius/this.distance,this.distance<this.effect.mouse.radius&&(this.angle=Math.atan2(this.dy,this.dx),this.vx+=this.force*Math.cos(this.angle),this.vy+=this.force*Math.sin(this.angle)),this.x+=(this.vx*=this.friction)+(this.originX-this.x)*this.ease,this.y+=(this.vy*=this.friction)+(this.originY-this.y)*this.ease}}class n{constructor(t,e,h){this.context=t,this.canvasWidth=e,this.canvasHeight=h,this.textX=this.canvasWidth/20,this.textY=this.canvasHeight/2,this.maxTextWidth=.6*this.canvasWidth,s.clientWidth>=s.clientHeight?this.fontSize=s.clientWidth/s.clientHeight*70:s.clientHeight>s.clientWidth&&(this.fontSize=s.clientWidth/s.clientHeight*70),console.log(this.fontSize),this.lineHeight=1.15*this.fontSize,this.textInput=document.getElementById("canvasNameHeader"),this.verticalOffset=180,this.textInput.addEventListener("keyup",t=>{" "!==t.key&&(this.context.clearRect(0,0,this.canvasWidth,this.canvasHeight),this.wrapText(t.target.value))}),this.particles=[],this.gap=2,this.mouse={radius:5e4,x:0,y:0},i.addEventListener("mousemove",t=>{const e=i.getBoundingClientRect();this.mouse.x=t.x-e.left,this.mouse.y=t.y-e.top}),i.addEventListener("touchmove",t=>{this.mouse.x=t.x,this.mouse.y=t.y})}wrapText(t){const i=this.context.createLinearGradient(0,0,this.canvasWidth,this.canvasHeight);i.addColorStop(.2,"white"),i.addColorStop(.5,"white"),i.addColorStop(.8,"white"),this.context.fillStyle=i,this.context.textAlign="left",this.context.textBaseline="middle",this.context.lineWidth=1,this.context.fontStyle="normal ",this.context.fontWeight="500 ",this.context.font=this.context.fontStyle+this.context.fontWeight+this.fontSize+"px Poppins";let e=[],s=t.split("\n"),h=0,n="";for(let t=0;t<s.length;t++){let i=n+s[t]+" ";this.context.measureText(i).width>this.maxTextWidth?(n=s[t]+" ",h++):n=i,e[h]=n}let a=this.lineHeight*h;this.textY=this.canvasHeight/2-a/2+this.verticalOffset,e.forEach((t,i)=>{this.context.fillText(t,this.textX,this.textY+i*this.lineHeight)}),this.convertToParticles()}convertToParticles(){this.particles=[];const t=this.context.getImageData(0,0,this.canvasWidth,this.canvasHeight).data;this.context.clearRect(0,0,this.canvasWidth,this.canvasHeight);for(let i=0;i<this.canvasHeight;i+=this.gap)for(let e=0;e<this.canvasWidth;e+=this.gap){const s=4*(i*this.canvasWidth+e),n=t[s+3];if(n>0){const n=t[s],a=t[s+1],c=t[s+2],o="rgb("+n+","+a+","+c+")";this.particles.push(new h(this,e,i,o))}}}render(){this.particles.forEach(t=>{t.update(),t.draw()})}resize(t,i){this.canvasWidth=t,this.canvasHeight=i,this.textX=this.canvasWidth/5,this.textY=this.canvasHeight/5,this.maxTextWidth=1*this.canvasWidth,this.fontSize=s.clientWidth/2.5}}const a=new n(e,i.width,i.height);a.wrapText("Hi, I'm Jakob.\nI'm a web developer."),a.render(),t(),window.addEventListener("resize",function(){i.width=window.innerWidth,i.height=window.innerHeight,a.resize(i.width,i.height),a.wrapText(a.textInput.value),a.wrapText("Hi, I'm Jakob.\nI'm a web developer.")})});